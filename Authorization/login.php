<?php

// Подключаем файл для работы с базой данных
require_once('db.php');

// Получаем значения логина и пароля из POST-запроса
$login = $_POST["login"]; // Исправлены скобки на квадратные скобки
$password = $_POST["password"]; // Исправлены скобки на квадратные скобки

// Проверяем, заполнены ли оба поля
if (empty($login) || empty($password)) {
    echo "Заполните все поля";
} else {
    // Формируем SQL-запрос для выборки пользователя из базы данных
    // Заменены одинарные кавычки вокруг имени таблицы на двойные
    $SQL = "SELECT * FROM USERS WHERE login = '$login' AND password = '$password'";
    $result = pg_query($dbconn, $SQL);

    // Проверяем, есть ли результаты запроса
    // Исправлены скобки и оператор в pg_num_rows() и pg_fetch_assoc()
    if (pg_num_rows($result) > 0) {
        // Если пользователь найден, выводим приветствие
        while ($row = pg_fetch_assoc($result)) {
            echo "Добро пожаловать " . $row['login'];
        }
    } else {
        // Если пользователь не найден, выводим сообщение об ошибке
        echo "Нет такого пользователя";
    }
}

